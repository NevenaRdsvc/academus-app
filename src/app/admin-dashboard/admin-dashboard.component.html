<la-message></la-message>
<div class="admin-square">
  <aside class="admin-menu">
    <div class="logo-section">
      <img src="assets/images/logo-academus.png" alt="Logo" class="logo" />
      <h2>Academus</h2>
    </div>

    <div class="menu-links">
      <button [class.active]="activeTab === 'materials'" (click)="setTab('materials')">
        <img src="assets/images/learning-icon.png" alt="Dodaj materijale" />
        Dodaj materijale
      </button>
      <button [class.active]="activeTab === 'users'" (click)="setTab('users')">
        <img src="assets/images/profil-icon.png" alt="Registrovani korisnici" />
        Registrovani korisnici
      </button>
    </div>

    <button class="logout" (click)="logout()">
      <img src="assets/images/sign-out-icon.png" alt="Odjava" />
      Odjava
    </button>
  </aside>

  <main class="admin-content">
    <section *ngIf="activeTab === 'materials'">
      <div class="faculty-banner" [style.background-image]="'url(' + (currentFaculty?.banner || getRandomBanner()) + ')'">
        <div class="faculty-banner-text">
          <h2>{{ currentFaculty?.name }}</h2>
          <p>{{ currentFaculty?.location }}</p>
        </div>
      </div>

      <div class="form-grid">
        <input type="text" [(ngModel)]="newMaterial.title" placeholder="Naslov" />

        <div class="custom-dropdown" [class.open]="dropdownOpen" (click)="toggleDropdown()">
          <div class="selected">
            {{ selectedSubject || 'Izaberite predmet' }}
            <span class="arrow"></span>
          </div>
          <ul class="options">
            <li *ngFor="let s of subjects" (click)="selectSubject(s, $event)">{{ s }}</li>
          </ul>
        </div>

   <div class="custom-dropdown" [class.open]="typeDropdownOpen" (click)="toggleTypeDropdown()">
  <div class="selected">
    {{ newMaterial.type || 'Izaberite tip materijala' }}
    <span class="arrow"></span>
  </div>
  <ul class="options">
    <li (click)="selectType('zbirka', $event)">Zbirka</li>
    <li (click)="selectType('stari-rokovi', $event)">Stari rokovi</li>
  </ul>
</div>

        <label class="upload-btn">
          Izaberite fajl
          <input type="file" (change)="onFileSelected($event)" />
        </label>

        <button (click)="addMaterial()">Dodaj</button>
      </div>

      <div class="materials-section">
        <div *ngIf="getMaterialsByType('zbirka').length > 0" class="category">
          <h3>Zbirke</h3>
          <div class="materials-grid">
            <div class="material-card" *ngFor="let m of getMaterialsByType('zbirka'); let i = index">
              <div class="card-content">
                <h4>{{ m.title }}</h4>
                <p><strong>Predmet:</strong> {{ m.subject }}</p>
                <p class="date">{{ m.uploadedAt | date:'short' }}</p>
              </div>
              <div class="card-actions">
                <a [href]="m.fileUrl" target="_blank" class="icon-btn view" title="Pregled">
                  <span class="material-icons">visibility</span>
                </a>
                <button (click)="deleteMaterial(i)" class="icon-btn delete" title="Obriši">
                  <span class="material-icons">delete</span>
                </button>
              </div>
            </div>
          </div>
        </div>

        <div *ngIf="getMaterialsByType('stari-rokovi').length > 0" class="category">
          <h3>Stari rokovi</h3>
          <div class="materials-grid">
            <div class="material-card" *ngFor="let m of getMaterialsByType('stari-rokovi'); let i = index">
              <div class="card-content">
                <h4>{{ m.title }}</h4>
                <p><strong>Predmet:</strong> {{ m.subject }}</p>
                <p class="date">{{ m.uploadedAt | date:'short' }}</p>
              </div>
              <div class="card-actions">
                <a [href]="m.fileUrl" target="_blank" class="icon-btn view" title="Pregled">
                  <span class="material-icons">visibility</span>
                </a>
                <button (click)="deleteMaterial(i)" class="icon-btn delete" title="Obriši">
                  <span class="material-icons">delete</span>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section *ngIf="activeTab === 'users'">
      <h2 style="font-size: 20px; margin-bottom: 20px;">
        Registrovani korisnici ({{ registeredUsers.length }})
      </h2>

      <ul class="users-list">
        <li *ngFor="let user of registeredUsers">
          <span class="user-avatar">{{ user.avatar }}</span>
          <span class="user-name">{{ user.name }}</span>
          <span class="user-email">{{ user.email }}</span>
        </li>
      </ul>
    </section>
  </main>
</div>
