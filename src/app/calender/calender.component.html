<la-square>
  <div class="square">
    <div class="content">
      <div class="calendar-container">
        
        <div class="calendar-grid-wrapper">
          <div class="calendar-grid">
            <div class="month-nav">
              <button class="nav-btn prev" (click)="prevMonth()">
                <img src="assets/images/back-arrow.png" alt="Prethodni mesec">
              </button>
              <span>{{ monthName }} {{ currentYear }}</span>
              <button class="nav-btn next" (click)="nextMonth()">
                <img src="assets/images/forward-arrow.png" alt="Sledeći mesec">
              </button>
            </div>

            <div class="weekdays">
              <span *ngFor="let day of ['Ned','Pon','Uto','Sre','Čet','Pet','Sub']">{{ day }}</span>
            </div>

            <div class="days">
              <span *ngFor="let day of monthDays"
                    class="day"
                    [class.selected]="selectedDay === day"
                    (click)="selectDate(day)">
                <div class="day-number">{{ day }}</div>

                <div *ngFor="let evt of getEventsForDay(day)"
                     class="mini-event"
                     [title]="evt.title"
                     [style.backgroundColor]="evt.color">
                  {{ evt.title | slice:0:10 }}{{ evt.title.length > 10 ? '…' : '' }}
                </div>
              </span>
            </div>
          </div>
        </div>

        <div class="event-panel">
          <div class="add-event">
            <input type="text" placeholder="Naziv događaja" [(ngModel)]="newTitle">

            <div class="color-picker-container">
              <button class="color-button" (click)="toggleColorPicker()">
                <i class="fa fa-paint-brush"></i>
              </button>
              <div class="color-palette" *ngIf="showColors">
                <div
                  class="color-circle"
                  *ngFor="let color of pastelColors"
                  [style.backgroundColor]="color"
                  (click)="selectColor(color)">
                </div>
              </div>
            </div>

            <button (click)="addEvent()" [disabled]="!newTitle.trim()" class="add-button">Dodaj</button>
          </div>

          <ul class="event-list">
  <li *ngFor="let evt of getEventsForDay(selectedDay)"
      [ngStyle]="{
        'background-color': getLighterColor(evt.color),
        'color': evt.color
      }">
    <span class="title-event">{{ evt.title }}</span>
    <div class="event-controls">
      <button class="delete-btn" (click)="deleteEvent(evt)">
        <img src="assets/images/delete-icon.png" alt="Obriši">
      </button>
    </div>
  </li>
</ul>
        </div>

      </div>
    </div>
  </div>
</la-square>
